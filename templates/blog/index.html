{% extends 'base.html' %}

{% block main %}

    {% for post in post_list %}
        <article class="post post-{{ post.pk }}">
            <header class="entry-header">
                <h1 class="entry-title">
                    <a href="{{ post.get_absolute_url }}">{{ post.title }}</a>
                </h1>
                <div class="entry-meta">
                    <span class="post-category"><a
                            href="{% url 'blog:category' post.category.pk %}">{{ post.category }}</a></span>
                    <span class="post-date">
                                    <a href="{% url 'blog:archive-day' post.created_time.year post.created_time.month post.created_time.day %}">
                                        <time class="entry-date" datetime="{{ post.created_time }}">
                                            {{ post.created_time }}
                                        </time>
                                    </a>
                                </span>
                    <span class="post-author"><a
                            href="{% url 'blog:posts-by-author' post.author.pk %}">{{ post.author }}</a></span>
                    {#  TODO: fetch # of {comments, reads}  #}
                    <span class="comments-link"><a
                            href="{{ post.get_absolute_url }}#comments">{{ post.number_comments }} comments</a></span>
                    <span class="views-count"><a href="{{ post.get_absolute_url }}">{{ post.reads }} reads</a></span>
                </div>
            </header>
            <div class="entry-content clearfix">
                <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore
                    et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut
                    aliquip ex ea commodo</p>
                <div class="read-more cl-effect-14">
                    <a href="{{ post.get_absolute_url }}" class="more-link">Continue reading <span
                            class="meta-nav">→</span></a>
                </div>
            </div>
        </article>
    {% empty %}
        <div class="no-post">There no published articles yet！</div>
    {% endfor %}

    {% if is_paginated %}
        <ul class="pagination">
            {% if page_obj.has_previous %}
                <li><a href="?page={{ page_obj.previous_page_number }}">&laquo;</a></li>
            {% else %}
                <li class="disabled"><span>&laquo;</span></li>
            {% endif %}
            {% for i in paginator.page_range %}
                {% if page_obj.number == i %}
                    <li class="active"><span>{{ i }} <span class="sr-only">(current)</span></span></li>
                {% else %}
                    <li><a href="?page={{ i }}">{{ i }}</a></li>
                {% endif %}
            {% endfor %}
            {% if page_obj.has_next %}
                <li><a href="?page={{ page_obj.next_page_number }}">&raquo;</a></li>
            {% else %}
                <li class="disabled"><span>&raquo;</span></li>
            {% endif %}
        </ul>
    {% endif %}

{% endblock %}